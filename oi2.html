<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Completo do Cartão TOP - Transporte Metropolitano</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            width: 80%;
            margin: auto;
            overflow: hidden;
            padding: 0 20px;
        }
        header {
            background: #003366; /* Azul escuro EMTU */
            color: #fff;
            padding: 1rem 0;
            text-align: center;
        }
        header img {
            max-width: 150px;
        }
        header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        section {
            background: #fff;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h2 {
            color: #0056b3;
            border-bottom: 2px solid #f4f4f4;
            padding-bottom: 10px;
        }
        .flex-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .flex-item {
            flex: 1;
            min-width: 300px;
        }
        .flex-item img {
            max-width: 100%;
            border-radius: 8px;
            margin-top: 10px; /* Adicionado para espaçamento em imagens */
        }
        a {
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .button {
            display: inline-block;
            background: #28a745;
            color: #fff;
            padding: 10px 20px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
            margin-top: 10px;
        }
        .button.whatsapp {
            background: #25D366;
        }
        .button.phone {
            background: #d9534f;
        }
        
        /* Estilos para o aviso */
        .alert-box {
            background-color: #fff3cd; /* Amarelo claro */
            border-left: 5px solid #ffc107; /* Borda amarela */
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            color: #664d03; /* Texto escuro */
        }
        .alert-box strong {
            color: #664d03;
        }

        /* Estilos para os itens da lista de endereços */
        .address-list li {
            list-style: none; /* Remove os marcadores de lista */
            margin-bottom: 10px;
        }
        
        .address-link {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-left: 3px solid #0056b3;
            background-color: #f9f9f9;
            border-radius: 8px;
            text-decoration: none;
            color: #333;
            transition: background-color 0.3s ease;
        }

        .address-link:hover {
            background-color: #e9e9e9;
        }

        .address-link-content {
            flex-grow: 1;
        }

        .address-list li .status {
            font-weight: bold;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            white-space: nowrap; /* Impede que o texto quebre */
        }
        .address-list li .status.available {
            background-color: #d4edda;
            color: #155724;
        }
        .address-list li .status.unavailable {
            background-color: #f8d7da;
            color: #721c24;
        }
        .search-container {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .search-container input, .search-container select, .search-container button {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            flex: 1;
            min-width: 150px;
        }
        .search-container button {
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
            flex: 0; /* Impede que o botão se estenda */
            min-width: 100px;
        }
        .search-container button:hover {
            background-color: #0056b3;
        }
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            background: #333;
            color: #fff;
        }
    </style>
</head>
<body>

    <header>
        <img src="https://www.boradetop.com.br/wp-content/uploads/2023/07/logo-top.png" alt="Logo Cartão TOP">
        <h1>Guia Completo do Cartão TOP</h1>
        <p>Sua central de ajuda para o transporte metropolitano de São Paulo</p>
    </header>

    <div class="container">

        <section>
            <h2>O que é o Cartão TOP?</h2>
            <div class="flex-container">
                <div class="flex-item">
                    <p>O <strong>Cartão TOP</strong> é o sistema de bilhetagem eletrônica para o transporte intermunicipal na Região Metropolitana de São Paulo, gerenciado pela EMTU/SP. Ele substituiu o antigo Cartão BOM, mantendo suas funcionalidades e, em versões anteriores, chegou a oferecer serviços financeiros.</p>
                    <p>Ele também é aceito nos ônibus municipais de Cotia e outros municípios específicos (a aceitação varia por cidade). O cartão pode ter diversas modalidades, cada uma com suas regras específicas.</p>
                </div>
                <div class="flex-item">
                    <img src="https://www.boradetop.com.br/wp-content/uploads/2023/12/Prancheta-1-copiar-scaled.jpg" alt="Imagem do Cartão TOP">
                </div>
            </div>
            
            <div class="alert-box">
                <p><strong>ATENÇÃO IMPORTANTE:</strong> O **TOP Cartão de Crédito (versão híbrida com Mastercard)** foi descontinuado a partir de julho de 2024. As informações a seguir referem-se às modalidades de transporte do Cartão TOP, que é o foco atual do serviço.</p>
            </div>
        </section>

        <section>
            <h2>Modalidades do Cartão TOP</h2>
            <p>Conheça as diferentes funções do seu Cartão TOP e suas particularidades:</p>
            <ul>
                <li><strong>Comum:</strong> Para uso geral no transporte público metropolitano. É a modalidade padrão para passageiros que pagam a tarifa cheia.</li>
                <li><strong>Vale-Transporte:</strong> Destinado a trabalhadores, com créditos fornecidos pelos empregadores para uso nas linhas intermunicipais. Sua validade, por lei, é de 30 dias após reajuste tarifário, mas há um projeto de lei para estender para 12 meses.</li>
                <li><strong>Escolar (Meia Tarifa e Passe Livre):</strong> Oferece 50% de desconto ou isenção total da tarifa para estudantes e professores elegíveis.
                    <ul>
                        <li>**Importante:** O Cartão TOP Escolar **não é aceito no Metrô ou CPTM**. Para esses modais, é necessário utilizar o Bilhete Único da SPTrans.</li>
                        <li>**Validade:** Os créditos Escolares seguem o ano letivo.</li>
                        <li>**Atualização (a partir de Mai/2025):** Melhorias no sistema permitirão a atualização automática do benefício com apenas a aproximação do cartão em um validador.</li>
                    </ul>
                </li>
                <li><strong>Especial:</strong> Para pessoas com deficiência, garantindo isenção tarifária em ônibus metropolitanos intermunicipais.</li>
                <li><strong>Sênior:</strong> Para idosos, mantendo os benefícios de gratuidade ou descontos especiais do antigo Cartão BOM Sênior.</li>
            </ul>
        </section>

        <section>
            <h2>Onde o Cartão TOP é Aceito?</h2>
            <p>O Cartão TOP é amplamente aceito na Região Metropolitana de São Paulo:</p>
            <ul>
                <li><strong>Ônibus Intermunicipais da EMTU:</strong> Incluindo as linhas seletivas e o Corredor Metropolitano ABD.</li>
                <li><strong>Trens e Metrô:</strong> Em todas as estações da CPTM, ViaMobilidade e Metrô.</li>
                <li><strong>Integração:</strong> Permite descontos na integração entre ônibus EMTU e trens/Metrô.</li>
                <li><strong>Ônibus Municipais:</strong> A aceitação varia por cidade. Consulte a prefeitura local ou o site do Cartão TOP para mais detalhes.</li>
            </ul>
        </section>

        <section>
            <h2>Recarga, Consulta de Saldo e Regras Importantes</h2>
            <div class="flex-container">
                <div class="flex-item">
                    <h3>Como Recarregar seu Cartão TOP</h3>
                    <p>A recarga pode ser feita de diversas formas:</p>
                    <ul>
                        <li><strong>Canais Digitais:</strong> Aplicativo TOP, WhatsApp TOP, Carteira do Google.
                            <ul>
                                <li>**ATENÇÃO:** Há um **limite diário de R$ 100** para recargas digitais no Cartão TOP Transporte. Para recarregar valores maiores, utilize as máquinas de autoatendimento.</li>
                            </ul>
                        </li>
                        <li><strong>Pontos Físicos:</strong> Máquinas de autoatendimento (terminais em estações), Lojas Pernambucanas, e outros estabelecimentos credenciados.</li>
                    </ul>
                    <p>É crucial que os créditos comprados digitalmente sejam **validados fisicamente** em validadores nos ônibus, terminais ou estações de Metrô/CPTM para serem ativados.</p>
                </div>
                <div class="flex-item">
                    <h3>Consulta de Saldo</h3>
                    <p>Você pode verificar o saldo do seu Cartão TOP de forma rápida e prática:</p>
                    <ul>
                        <li>Pelo Aplicativo TOP</li>
                        <li>Pelo WhatsApp TOP</li>
                        <li>Nos validadores físicos (ônibus, catracas de Metrô/CPTM)</li>
                    </ul>
                    <img src="https://www.viamobilidade.com.br/wp-content/uploads/2022/10/cartao-top.jpeg" alt="Pessoa usando o cartão TOP no validador">
                </div>
            </div>

            <div class="alert-box">
                <h3><p style="color: #664d03;">**NOVA REGRA IMPORTANTE: Limite Máximo de Saldo de R$ 1.000**</p></h3>
                <p>Recentemente, o Cartão TOP estipulou que o **saldo máximo de créditos que pode ser acumulado no cartão é de R$ 1.000,00 (mil reais)**. Essa regra afeta as recargas e o gerenciamento do seu saldo:</p>
                <ul>
                    <li>Se uma recarga for realizada e o valor total (saldo atual + recarga) ultrapassar R$ 1.000, apenas a quantia que preenche o saldo até o limite de R$ 1.000 será creditada.</li>
                    <li>O restante da recarga **não será creditado** no cartão até que o saldo seja utilizado e abra espaço abaixo do teto de R$ 1.000.</li>
                    <li>**Exemplo:** Se você tem R$ 900 de saldo e uma recarga de R$ 400 está para cair, apenas R$ 100 dos R$ 400 serão creditados (totalizando R$ 1.000). Os R$ 300 restantes da recarga ficarão pendentes até que você gaste o saldo e o valor no cartão seja inferior a R$ 1.000.</li>
                </ul>
                <p>É fundamental que os usuários monitorem seu saldo para garantir o recebimento completo das recargas.</p>
            </div>
            
            <h3>Transição do Cartão BOM para o TOP</h3>
            <p>A transição do antigo Cartão BOM para o TOP não transferiu saldos automaticamente. Usuários precisaram utilizar os créditos remanescentes no Cartão BOM até o seu esgotamento.</p>
        </section>

        <section>
            <h2>Guia do Aplicativo TOP (Android e iOS)</h2>
            <p>O aplicativo TOP é uma ferramenta essencial para gerenciar seu cartão. Veja como resolver alguns problemas comuns:</p>
            <div class="flex-container">
                <div class="flex-item">
                    <h3>Limpar Cache do Aplicativo</h3>
                    <p>A limpeza do cache pode resolver problemas de lentidão ou funcionamento:</p>
                    <ul>
                        <li><strong>Android:</strong>
                            <ol>
                                <li>Vá em "Configurações" do seu celular.</li>
                                <li>Procure por "Aplicativos" ou "Apps".</li>
                                <li>Encontre e selecione o aplicativo "TOP".</li>
                                <li>Toque em "Armazenamento" e, em seguida, em "Limpar cache".</li>
                            </ol>
                        </li>
                        <li><strong>iOS (iPhone):</strong>
                            <p>No iOS, não há uma opção direta para "Limpar Cache" de apps específicos. A melhor forma é:</p>
                            <ol>
                                <li>Vá em "Ajustes" > "Geral" > "Armazenamento do iPhone".</li>
                                <li>Encontre o aplicativo "TOP" na lista.</li>
                                <li>Toque em "Desinstalar App" (o que mantém os dados do usuário, mas remove o app) ou "Apagar App" (o que remove o app e todos os seus dados). Para uma limpeza mais profunda, "Apagar App" é recomendado, seguido de reinstalação.</li>
                            </ol>
                        </li>
                    </ul>
                </div>
                <div class="flex-item">
                    <h3>Desinstalar e Reinstalar o Aplicativo</h3>
                    <p>Se o problema persistir, a reinstalação pode ser a solução:</p>
                    <ul>
                        <li><strong>Android:</strong>
                            <ol>
                                <li>Pressione e segure o ícone do aplicativo TOP na tela inicial ou na gaveta de aplicativos.</li>
                                <li>Arraste-o para a opção "Desinstalar" ou toque no ícone de "i" (Informações do app) e depois em "Desinstalar".</li>
                                <li>Após desinstalar, vá na Google Play Store, procure por "TOP Aplicativo de Mobilidade" e instale novamente.</li>
                            </ol>
                        </li>
                        <li><strong>iOS (iPhone):</strong>
                            <ol>
                                <li>Pressione e segure o ícone do aplicativo TOP na tela inicial até que todos os ícones comecem a tremer.</li>
                                <li>Toque no "X" ou sinal de menos (-) no canto superior esquerdo do ícone do TOP e confirme "Apagar App".</li>
                                <li>Após apagar, vá na App Store, procure por "TOP Aplicativo de Mobilidade" e instale novamente.</li>
                            </ol>
                        </li>
                    </ul>
                </div>
            </div>

            <h3>Reset de Senha via Canais de Atendimento</h3>
            <p>Se você esqueceu sua senha do aplicativo, pode redefini-la pelos canais de atendimento:</p>
            <ul>
                <li><strong>Via WhatsApp TOP:</strong>
                    <ol>
                        <li>Envie uma mensagem para o WhatsApp oficial do Cartão TOP: <a href="https://wa.me/551138882200" target="_blank">(11) 3888-2200</a>.</li>
                        <li>Siga as instruções do atendimento automático. Geralmente, há uma opção para problemas de acesso ou recuperação de senha.</li>
                        <li>Você pode ser solicitado a informar dados pessoais para confirmação de identidade e, em seguida, receberá as instruções para redefinir a senha.</li>
                    </ol>
                </li>
                <li><strong>Via Ligação para a Central de Atendimento:</strong>
                    <ol>
                        <li>Ligue para a Central de Atendimento do Cartão TOP: <a href="tel:+551138882200">(11) 3888-2200</a>.</li>
                        <li>Siga o menu de opções para falar com um atendente sobre problemas de acesso ou recuperação de senha.</li>
                        <li>O atendente irá solicitar alguns dados para verificar sua identidade e te auxiliará no processo de reset da senha.</li>
                    </ol>
                </li>
            </ul>
        </section>


        <section>
            <h2>Canais de Atendimento e Links Úteis</h2>
            <p>Para dúvidas, problemas ou mais informações, utilize os canais oficiais:</p>
            <a href="https://wa.me/551138882200" target="_blank" class="button whatsapp">Atendimento via WhatsApp</a>
            <a href="tel:+551138882200" class="button phone">Ligar para a Central (11) 3888-2200</a>
            <br><br>
            <ul>
                <li><strong>Site Oficial:</strong> <a href="https://www.boradetop.com.br/" target="_blank">boradetop.com.br</a></li>
                <li><strong>Aplicativo TOP para Android:</strong> <a href="https://play.google.com/store/apps/details?id=br.com.autopass.top" target="_blank">Baixar na Google Play</a></li>
                <li><strong>Aplicativo TOP para iOS:</strong> <a href="https://apps.apple.com/br/app/top-aplicativo-de-mobilidade/id1527780302" target="_blank">Baixar na App Store</a></li>
            </ul>
        </section>

        <section>
            <h2>Onde Solicitar e Retirar seu Cartão TOP</h2>
            <p>Você pode solicitar seu cartão pelo <strong>aplicativo TOP</strong> e escolher receber em casa ou retirar em um ponto. Se preferir, pode fazer a solicitação presencialmente. É necessário agendamento prévio pelo site oficial.</p>
            <h3>Encontre a Pernambucanas mais próxima de você!</h3>
            <p>Clique no botão para encontrar a loja mais próxima da sua localização atual.</p>
            <div class="search-container">
                <button onclick="findClosestStoreByGeolocation()">Encontrar Loja Mais Próxima</button>
            </div>
            
            <div id="closestStoreResult" class="address-list">
                </div>

            <p><strong>Atenção:</strong> Verifique no site <a href="https://www.boradetop.com.br/onde-estamos" target="_blank">Bora de TOP - Onde Estamos</a> a lista completa e atualizada de todos os postos de atendimento e terminais.</p>
        </section>

    </div>

    <footer>
        <p>Página informativa criada para auxiliar os usuários do Cartão TOP. Esta não é uma página oficial. Para informações oficiais, acesse o site Bora de TOP.</p>
    </footer>

    <script>
        // Dados das lojas com coordenadas (latitude e longitude)
        const stores = [
            { name: "Pernambucanas Barueri", address: "R. Campos Sales, 045 - Barueri - SP", category: "Barueri", status: "available", coords: { lat: -23.51862, lng: -46.87768 } },
            { name: "Pernambucanas Carapicuiba", address: "Av. Rui Barbosa, 447 - Carapicuiba - SP", category: "Carapicuiba", status: "available", coords: { lat: -23.52229, lng: -46.83611 } },
            { name: "Pernambucanas Cotia", address: "Av. Prof. Joaquim Barreto, 48 - Centro, Cotia - SP", category: "Cotia", status: "available", coords: { lat: -23.60098, lng: -46.91896 } },
            { name: "Pernambucanas Diadema", address: "Praça Pres. Castelo Branco, 55 - Centro, Diadema - SP", category: "ABC Paulista", status: "available", coords: { lat: -23.68417, lng: -46.61906 } },
            { name: "Pernambucanas Franco da Rocha", address: "R. Dr. Hamilton Prado, 50 - Franco da Rocha - SP", category: "Franco da Rocha", status: "available", coords: { lat: -23.31599, lng: -46.72659 } },
            { name: "Pernambucanas Guarulhos", address: "R. Dom Pedro Ii, 113 - Guarulhos - SP", category: "Guarulhos", status: "available", coords: { lat: -23.46513, lng: -46.53696 } },
            { name: "Pernambucanas Itaquaquecetuba", address: "R. Capitão José Leite, 103 - Itaquaquecetuba - SP", category: "Itaquaquecetuba", status: "available", coords: { lat: -23.47355, lng: -46.36441 } },
            { name: "Pernambucanas Mauá", address: "Av. Barão De Mauá, 74 - Mauá - SP", category: "ABC Paulista", status: "available", coords: { lat: -23.66699, lng: -46.46049 } },
            { name: "Pernambucanas Mogi das Cruzes", address: "R. Dr. Deodato Wertheimer, 1350 - Mogi das Cruzes - SP", category: "Mogi das Cruzes", status: "available", coords: { lat: -23.51733, lng: -46.18247 } },
            { name: "Pernambucanas Osasco", address: "R. Antonio Agu, 126 - Osasco - SP", category: "Osasco", status: "available", coords: { lat: -23.53509, lng: -46.78206 } },
            { name: "Pernambucanas Santo André", address: "R. Cel. Oliveira Lima, 392 - Centro, Santo André - SP", category: "ABC Paulista", status: "available", coords: { lat: -23.65584, lng: -46.52445 } },
            { name: "Pernambucanas São Bernardo do Campo", address: "R. Marechal Deodoro, 1374 - Centro, São Bernardo do Campo - SP", category: "ABC Paulista", status: "available", coords: { lat: -23.69805, lng: -46.56475 } },
            { name: "Pernambucanas Shopping Metrô Itaquera", address: "Av. Jose Pinheiro, 228 - Itaquera, São Paulo - SP", category: "Zona Leste", status: "available", coords: { lat: -23.54131, lng: -46.47167 } },
            // ... adicione as outras lojas com suas coordenadas (latitude e longitude) aqui
            // As coordenadas foram obtidas via Google Maps para os endereços
        ];

        // Função para calcular a distância entre duas coordenadas (Fórmula de Haversine)
        function getDistance(lat1, lon1, lat2, lon2) {
            const R = 6371e3; // Raio da Terra em metros
            const φ1 = lat1 * Math.PI/180; // φ, λ em radianos
            const φ2 = lat2 * Math.PI/180;
            const Δφ = (lat2-lat1) * Math.PI/180;
            const Δλ = (lon2-lon1) * Math.PI/180;

            const a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +
                      Math.cos(φ1) * Math.cos(φ2) *
                      Math.sin(Δλ/2) * Math.sin(Δλ/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));

            return R * c; // Distância em metros
        }

        function findClosestStoreByGeolocation() {
            if ("geolocation" in navigator) {
                // Solicita a localização do usuário
                navigator.geolocation.getCurrentPosition(function(position) {
                    const userLat = position.coords.latitude;
                    const userLon = position.coords.longitude;
                    
                    const storesWithDistance = stores.map(store => {
                        const distance = getDistance(userLat, userLon, store.coords.lat, store.coords.lng);
                        return { ...store, distance };
                    });

                    // Filtra apenas as lojas disponíveis
                    const availableStores = storesWithDistance.filter(store => store.status === 'available');

                    // Ordena as lojas disponíveis pela distância
                    availableStores.sort((a, b) => a.distance - b.distance);

                    renderClosestStores(availableStores);
                }, function(error) {
                    // Trata o erro (usuário negou a permissão, etc.)
                    const resultDiv = document.getElementById('closestStoreResult');
                    resultDiv.innerHTML = `<p>Não foi possível obter sua localização. Por favor, permita o acesso à geolocalização ou tente novamente.</p>`;
                });
            } else {
                // Navegador não suporta geolocalização
                const resultDiv = document.getElementById('closestStoreResult');
                resultDiv.innerHTML = `<p>Seu navegador não suporta a funcionalidade de geolocalização.</p>`;
            }
        }

        function renderClosestStores(closestStores) {
            const resultDiv = document.getElementById('closestStoreResult');
            resultDiv.innerHTML = ''; // Limpa resultados anteriores
            
            if (closestStores.length === 0) {
                resultDiv.innerHTML = `<p>Nenhuma loja disponível encontrada nas proximidades.</p>`;
                return;
            }

            closestStores.forEach(store => {
                const distanceKm = (store.distance / 1000).toFixed(1).replace('.', ',');
                
                const listItem = document.createElement('li');
                const storeUrlName = encodeURIComponent(
                    `${store.name}`
                        .toLowerCase()
                        .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
                        .replace(/[^\w\s-]/g, '')
                        .replace(/\s+/g, '-')
                );
                const reservaUrl = `https://vico158.gendo.app/app/reserve/schedule/${storeUrlName}`;

                listItem.innerHTML = `
                    <a href="${reservaUrl}" target="_blank" class="address-link">
                        <div class="address-link-content">
                            <strong>${store.name}</strong> - ${store.address}<br>
                            <small>Distância: ${distanceKm} km</small>
                        </div>
                        <span class="status available">Disponível</span>
                    </a>
                `;
                resultDiv.appendChild(listItem);
            });
        }
    </script>
</body>
</html>